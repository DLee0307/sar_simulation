<?xml version='1.0'?>
<sdf version='1.7'>
  <model name='SAR_Base' canonical_link='SAR_Body'>
    <pose>0 0 0 0 0 0</pose>   <!--the pose is relative to the world by default-->
    
    <!--SAR_Body-->
    <link name='SAR_Body'>   
        <!-- <pose relative_to='__model__'>0 0 1-2.0e-3 0 0 0</pose> -->
        <pose>0 0 0 0 0 0</pose> 
        <inertial> <!--inertial properties of the link mass, inertia matix-->
            <mass>37.0e-3</mass>
            <inertia>
                <ixx>17.20e-6</ixx>
                <ixy>0</ixy>
                <ixz>0</ixz>
                <iyy>17.70e-6</iyy>
                <iyz>0</iyz>
                <izz>34.20e-6</izz>
            </inertia>
            <pose>0 0 0 0 0 0</pose>
        </inertial>
        <pose>0 0 0 0 0 0</pose>
        <gravity>1</gravity>
        <self_collide>0</self_collide>
        <kinematic>0</kinematic>
        <enable_wind>0</enable_wind>

        <sensor name="imu" type="imu">
        <always_on>1</always_on>
        <update_rate>100</update_rate>
        <visualize>true</visualize>
        <topic>imu</topic>
        <enable_metrics>true</enable_metrics>
        </sensor>

        <visual name='Crazyflie_Base_Assembly'>
            <pose>0 0 0 0 0 0</pose>
            <geometry>
            <mesh>
                <uri>model://SAR_Base/meshes/Crazyflie_Base_Body.STL</uri>
                <scale>1 1 1</scale>
            </mesh>
            </geometry>
            <material>
                <!--DarkGrey-->
                <ambient>0.175 0.175 0.175 1</ambient>
                <diffuse>0.175 0.175 0.175 1</diffuse>
                <specular>0.175 0.175 0.175 1.00</specular>
            <lighting>1</lighting>
            </material>
        </visual>

        <visual name='Crazyflie_Motor_Arms'>
            <pose>0 0 0 0 0 0</pose>
            <geometry>
            <mesh>
                <uri>model://SAR_Base/meshes/Crazyflie_Motor_Arms.STL</uri>
                <scale>1 1 1</scale>
            </mesh>
            </geometry>
            <material>
                <!--White-->                    
                <ambient>1 1 1 1</ambient>
                <diffuse>1 1 1 1</diffuse>
                <specular>0.1 0.1 0.1 0.128</specular>
            <lighting>1</lighting>
            </material>
        </visual>

        <!-- <visual name='Crazyflie_Mocap_Ball'>
            <pose>0 0 0 0 0 0</pose>
            <geometry>
            <mesh>
                <uri>model://SAR_Base/meshes/Crazyflie_Mocap_Ball.STL</uri>
                <scale>1 1 1</scale>
            </mesh>
            </geometry>
            <material>                   
                <ambient>1 1 1 1</ambient>
                <diffuse>1 1 1 1</diffuse>
                <specular>0.1 0.1 0.1 0.128</specular>
            <lighting>1</lighting>
            </material>
        </visual> -->

        <collision name='Body_Collision_Prop_1'>
            <pose>33.0e-3 -33.0e-3 9.25e-3 0 0 0</pose>
            <geometry>
            <cylinder>
                <length>18.5e-3</length>
                <radius>23.0e-3</radius>
            </cylinder>
            </geometry>
        </collision>

        <collision name='Body_Collision_Prop_2'>
            <pose>-33.0e-3 -33.0e-3 9.25e-3 0 0 0</pose>
            <geometry>
            <cylinder>
                <length>18.5e-3</length>
                <radius>23.0e-3</radius>
            </cylinder>
            </geometry>
        </collision>

        <collision name='Body_Collision_Prop_3'>
            <pose>-33.0e-3 33.0e-3 9.25e-3 0 0 0</pose>
            <geometry>
            <cylinder>
                <length>18.5e-3</length>
                <radius>23.0e-3</radius>
            </cylinder>
            </geometry>
        </collision>

        <collision name='Body_Collision_Prop_4'>
            <pose>33.0e-3 33.0e-3 9.25e-3 0 0 0</pose>
            <geometry>
            <cylinder>
                <length>18.5e-3</length>
                <radius>23.0e-3</radius>
            </cylinder>
            </geometry>
        </collision>

    </link>

    <link name='Prop_1'>
        <inertial>
            <mass>1e-6</mass>
            <inertia>
                <ixx>1e-6</ixx>
                <ixy>0</ixy>
                <ixz>0</ixz>
                <iyy>1e-6</iyy>
                <iyz>0</iyz>
                <izz>1e-6</izz>
            </inertia>
            <pose>0 0 0 0 0 0</pose>
        </inertial>
        <pose>33.0e-3 -33.0e-3 16.0e-3 0 0 0</pose>
        <gravity>1</gravity>
        <self_collide>0</self_collide>
        <visual name='Crazyflie_Propeller_1'>
            <pose>0 0 0 0 0 0</pose>
            <geometry>
                <mesh>
                    <uri>model://SAR_Base/meshes/Crazyflie_Propeller.STL</uri>
                    <scale>1 1 1</scale>
                </mesh>
            </geometry>
            <material>
                <!--DarkGrey-->
                <ambient>0.175 0.175 0.175 1</ambient>
                <diffuse>0.175 0.175 0.175 1</diffuse>
                <specular>0.175 0.175 0.175 1.00</specular>
            <lighting>1</lighting>
            </material>
        </visual>
    </link>

    <link name='Prop_2'>
        <inertial>
            <mass>1e-6</mass>
            <inertia>
                <ixx>1e-6</ixx>
                <ixy>0</ixy>
                <ixz>0</ixz>
                <iyy>1e-6</iyy>
                <iyz>0</iyz>
                <izz>1e-6</izz>
            </inertia>
            <pose>0 0 0 0 0 0</pose>
        </inertial>
        <pose>-33.0e-3 -33.0e-3 16.0e-3 0 0 0</pose>
        <gravity>1</gravity>
        <self_collide>0</self_collide>
        <visual name='Crazyflie_Propeller_2'>
            <pose>0 0 0 0 0 0</pose>
            <geometry>
                <mesh>
                    <uri>model://SAR_Base/meshes/Crazyflie_Propeller.STL</uri>
                    <scale>1 1 1</scale>
                </mesh>
            </geometry>
            <material>
                <!--DarkGrey-->
                <ambient>0.175 0.175 0.175 1</ambient>
                <diffuse>0.175 0.175 0.175 1</diffuse>
                <specular>0.175 0.175 0.175 1.00</specular>
            <lighting>1</lighting>
            </material>
        </visual>
    </link>

    <link name='Prop_3'>
    <inertial>
        <mass>1e-6</mass>
        <inertia>
            <ixx>1e-6</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>1e-6</iyy>
            <iyz>0</iyz>
            <izz>1e-6</izz>
        </inertia>
        <pose>0 0 0 0 0 0</pose>
    </inertial>
    <pose>-33.0e-3 33.0e-3 16.0e-3 0 0 0</pose>
    <gravity>1</gravity>
    <self_collide>0</self_collide>
        <visual name='Crazyflie_Propeller_3'>
            <pose>0 0 0 0 0 0</pose>
            <geometry>
            <mesh>
                <uri>model://SAR_Base/meshes/Crazyflie_Propeller.STL</uri>
                <scale>1 1 1</scale>
            </mesh>
            </geometry>
                <material>
                    <!--DarkGrey-->
                    <ambient>0.175 0.175 0.175 1</ambient>
                    <diffuse>0.175 0.175 0.175 1</diffuse>
                    <specular>0.175 0.175 0.175 1.00</specular>
                <lighting>1</lighting>
                </material>
        </visual>
    </link>

    <link name='Prop_4'>
    <inertial>
        <mass>1e-6</mass>
        <inertia>
            <ixx>1e-6</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>1e-6</iyy>
            <iyz>0</iyz>
            <izz>1e-6</izz>
        </inertia>
        <pose>0 0 0 0 0 0</pose>
    </inertial>
    <pose>33.0e-3 33.0e-3 16.0e-3 0 0 0</pose>
    <gravity>1</gravity>
    <self_collide>0</self_collide>
        <visual name='Crazyflie_Propeller_4'>
            <pose>0 0 0 0 0 0</pose>
            <geometry>
                <mesh>
                    <uri>model://SAR_Base/meshes/Crazyflie_Propeller.STL</uri>
                    <scale>1 1 1</scale>
                </mesh>
            </geometry>
                <material>
                    <!--DarkGrey-->
                    <ambient>0.175 0.175 0.175 1</ambient>
                    <diffuse>0.175 0.175 0.175 1</diffuse>
                    <specular>0.175 0.175 0.175 1.00</specular>
                <lighting>1</lighting>
                </material>
        </visual>
    </link>


    <joint name='Prop_1_Joint' type='revolute'>
        <!--DH : Original was 
        <pose>0 0 0 0 0 0</pose>
        But I changed refers to "https://github.com/gazebosim/docs/blob/master/citadel/tutorials/building_robot/building_robot.sdf#L132"
          -->
        <pose relative_to='Prop_1'/>
        <parent>SAR_Body</parent>
        <child>Prop_1</child>
        <axis>
            <xyz expressed_in='__model__'>0 0 1</xyz>
            <limit>
                <lower>-1.79769e+308</lower> <!--negative infinity-->
                <upper>1.79769e+308</upper> <!--positive infinity-->
                <effort>-1</effort>
                <velocity>-1</velocity>
            </limit>
            <dynamics>
                <spring_reference>0</spring_reference>
                <spring_stiffness>0</spring_stiffness>
            </dynamics>
        </axis>
    </joint>

    <joint name='Prop_2_Joint' type='revolute'>
        <pose relative_to='Prop_2'/>
        <parent>SAR_Body</parent>
        <child>Prop_2</child>
        <axis>
            <xyz expressed_in='__model__'>0 0 1</xyz>
            <limit>
                <lower>-1.79769e+308</lower>
                <upper>1.79769e+308</upper>
                <effort>-1</effort>
                <velocity>-1</velocity>
            </limit>
            <dynamics>
                <spring_reference>0</spring_reference>
                <spring_stiffness>0</spring_stiffness>
            </dynamics>
        </axis>
    </joint>

    <joint name='Prop_3_Joint' type='revolute'>
        <pose relative_to='Prop_3'/>
        <parent>SAR_Body</parent>
        <child>Prop_3</child>
        <axis>
            <xyz expressed_in='__model__'>0 0 1</xyz>
            <limit>
                <lower>-1.79769e+308</lower>
                <upper>1.79769e+308</upper>
                <effort>-1</effort>
                <velocity>-1</velocity>
            </limit>
            <dynamics>
                <spring_reference>0</spring_reference>
                <spring_stiffness>0</spring_stiffness>
            </dynamics>
        </axis>
    </joint>

    <joint name='Prop_4_Joint' type='revolute'>
        <pose relative_to='Prop_4'/>
        <parent>SAR_Body</parent>t
        <child>Prop_4</child>
        <axis>
            <xyz expressed_in='__model__'>0 0 1</xyz>
            <limit>
                <lower>-1.79769e+308</lower>
                <upper>1.79769e+308</upper>
                <effort>-1</effort>
                <velocity>-1</velocity>
            </limit>
            <dynamics>
                <spring_reference>0</spring_reference>
                <spring_stiffness>0</spring_stiffness>
            </dynamics>
        </axis>
    </joint>

<!--  -->            
    <plugin
        filename="/home/dlee/ros2_ws/install/sar_gazebo/lib/libImu_Plugin.so"
        name="gz::sim::systems::Imu_Plugin">
    </plugin>
  
    <plugin
        filename="/home/dlee/ros2_ws/install/sar_gazebo/lib/libVicon_Plugin.so"
        name="gz::sim::systems::Vicon_Plugin">
        <!--<link_name>Prop_1</link_name>-->
        <link_name>SAR_Body</link_name>
    </plugin>
<!---->
    <plugin
        filename="/home/dlee/ros2_ws/install/sar_gazebo/lib/libMotor_Plugin.so"
        name="gz::sim::systems::Motor_Plugin">
        <Motor_Number>1</Motor_Number>
        <joint_name>Prop_1_Joint</joint_name>
        <link_name>Prop_1</link_name>
        <canonicallink_name>SAR_Body</canonicallink_name>
        <Turning_Direction>ccw</Turning_Direction>
        <Visual_Slowdown>200</Visual_Slowdown>                
    </plugin>

    <plugin
        filename="/home/dlee/ros2_ws/install/sar_gazebo/lib/libMotor_Plugin.so"
        name="gz::sim::systems::Motor_Plugin">
        <Motor_Number>2</Motor_Number>
        <joint_name>Prop_2_Joint</joint_name>
        <link_name>Prop_2</link_name>
        <canonicallink_name>SAR_Body</canonicallink_name>
        <Turning_Direction>cw</Turning_Direction>
        <Visual_Slowdown>200</Visual_Slowdown>                  
    </plugin>
    
    <plugin
        filename="/home/dlee/ros2_ws/install/sar_gazebo/lib/libMotor_Plugin.so"
        name="gz::sim::systems::Motor_Plugin">
        <Motor_Number>3</Motor_Number>
        <joint_name>Prop_3_Joint</joint_name>
        <link_name>Prop_3</link_name>
        <canonicallink_name>SAR_Body</canonicallink_name>
        <Turning_Direction>ccw</Turning_Direction>
        <Visual_Slowdown>200</Visual_Slowdown>                  
    </plugin>

    <plugin
        filename="/home/dlee/ros2_ws/install/sar_gazebo/lib/libMotor_Plugin.so"
        name="gz::sim::systems::Motor_Plugin">
        <Motor_Number>4</Motor_Number>
        <joint_name>Prop_4_Joint</joint_name>
        <link_name>Prop_4</link_name>
        <canonicallink_name>SAR_Body</canonicallink_name>
        <Turning_Direction>cw</Turning_Direction>
        <Visual_Slowdown>200</Visual_Slowdown>               
    </plugin>


    <static>0</static>
    <allow_auto_disable>1</allow_auto_disable>
  </model>
</sdf>
